# AI News Digest Bot

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–±–æ—Ä–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –¥–∞–π–¥–∂–µ—Å—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –±–æ—Ç–æ–≤ –∏–∑ –æ–¥–Ω–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, —Ç–µ–º–∞—Ç–∏–∫–æ–π –∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **"–°–Ω–∞—á–∞–ª–∞ —Ñ–∏–ª—å—Ç—Ä—É–µ–º, –ø–æ—Ç–æ–º —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ–º"** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

1.  **–≠—Ç–∞–ø 1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (`SUMMARY_PROMPT`)**
    *   **`telegram_parser.py`**: –°–æ–±–∏—Ä–∞–µ—Ç –ø–æ—Å—Ç—ã –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
    *   **`database.py`**: –•—Ä–∞–Ω–∏—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã –≤ **SQLite**.
    *   **`main.py` (—Ü–∏–∫–ª –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)**: –ü–æ—Å—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–∞—á–∫–∞–º–∏. –î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—á–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **OpenAI API** —Å –ø—Ä–æ–º–ø—Ç–æ–º `SUMMARY_PROMPT`, –∑–∞–¥–∞—á–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ ‚Äî –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —à—É–º (—Ä–µ–∫–ª–∞–º—É, –º–µ–º—ã, –ø–æ–≤—Ç–æ—Ä—ã) –∏ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –ø–æ—Å—Ç—ã –≤ –∏—Ö –ø–µ—Ä–≤–æ–∑–¥–∞–Ω–Ω–æ–º –≤–∏–¥–µ.

2.  **–≠—Ç–∞–ø 2: –°–∏–Ω—Ç–µ–∑ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è (`ARTICLE_PROMPT`)**
    *   **`main.py` (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤)**: –í—Å–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ **OpenAI API** —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º `ARTICLE_PROMPT`.
    *   **`article_generator.py`**: –ù–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–Ω–≥—Ä–∏–¥ –≤ HTML –∏ –∫—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏ –¥–ª—è –∞–Ω–æ–Ω—Å–∞.
    *   **`telegraph_publisher.py`**: –ü—É–±–ª–∏–∫—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç—å—é –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ **Telegra.ph**.
    *   **`telegram_notifier.py`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å—Ç–∞—Ç—å—é –≤ –∑–∞–¥–∞–Ω–Ω—ã–π Telegram-—á–∞—Ç.

3.  **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:**
    *   **`config.py`**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.env` —Ñ–∞–π–ª–æ–≤.
    *   **`check_session.py`**: –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏ Telethon.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone <your-repo-url>
cd ai_news_digest
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `.env` —Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤.

1.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.** –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è AI-–±–æ—Ç–∞ –∏ HR-–±–æ—Ç–∞:
    ```bash
    cp .env.example .env.ai
    cp .env.example .env.hr
    ```

2.  **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** –≤ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ (`.env.ai`, `.env.hr` –∏ —Ç.–¥.):
    *   `API_ID`, `API_HASH`: –í–∞—à–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ [my.telegram.org](https://my.telegram.org).
    *   `BOT_TOKEN`: –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather).
    *   `CHAT_ID`: ID —Ü–µ–ª–µ–≤–æ–≥–æ Telegram-–∫–∞–Ω–∞–ª–∞ –∏–ª–∏ —á–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `@my_channel`).
    *   `OPENAI_API_KEY`: –í–∞—à –∫–ª—é—á –æ—Ç OpenAI.
    *   `TELEGRAM_CHANNELS`: –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `channel1,channel2`).
    *   `DB_NAME`: –ò–º—è —Ñ–∞–π–ª–∞ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ai_news.db`). **–î–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞.**
    *   `SUMMARY_PROMPT`: **(–ù–æ–≤–æ–µ)** –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–ø–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ï–≥–æ –∑–∞–¥–∞—á–∞ ‚Äî –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç—ã, –æ—Ç–æ–±—Ä–∞–≤ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –∏ –≤–µ—Ä–Ω—É–≤ –∏—Ö –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –≤–∏–¥–µ.
    *   `ARTICLE_PROMPT`: –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —ç—Ç–∞–ø–∞. –ï–≥–æ –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç—å—é –∏ –∞–Ω–æ–Ω—Å.
    *   `SCHEDULE_DAY_OF_WEEK`: –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mon`, `tue`, `wed`, `thu`, `fri`, `sat`, `sun`).
    *   `SCHEDULE_HOUR`: –ß–∞—Å –∑–∞–ø—É—Å–∫–∞ (0-23).
    *   `SCHEDULE_MINUTE`: –ú–∏–Ω—É—Ç–∞ –∑–∞–ø—É—Å–∫–∞ (0-59).
    *   `TELEGRAM_PARSE_LIMIT`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –∫–∞–∂–¥–æ–º –∫–∞–Ω–∞–ª–µ.
    *   `OFFICIAL_CHANNELS`: –°–ø–∏—Å–æ–∫ username –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é), —á—Ç–æ–±—ã –≤ —Å—Ç–∞—Ç—å–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –Ω–∏—Ö –ø–æ–ø–∞–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª –∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ–¥—Å–≤–µ—á–∞–ª–∏—Å—å. –ü—Ä–∏–º–µ—Ä: `ozon,ozonru,wildberries_official,wbnews`.
    *   `ENABLE_TOC`: –í–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫ ¬´–ù–∞–≤–∏–≥–∞—Ü–∏—è¬ª (true/false). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`.
    *   `NAVIGATION_TITLE`: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –±–ª–æ–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è`).
    *   `NAVIGATION_STYLE`: –°—Ç–∏–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (`list` –∏–ª–∏ `paragraph`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `list` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤).
    *   `ENABLE_SECTION_SPLIT`: –í–∫–ª—é—á–∏—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å–µ–∫—Ü–∏–∏ ¬´–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ/–¥—Ä—É–≥–∏–µ¬ª (true/false). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`.
    *   `OFFICIAL_SECTION_TITLE`: –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏`).
    *   `OTHER_SECTION_TITLE`: –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ –ø—Ä–æ—á–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `–î—Ä—É–≥–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏`).
    *   `STRIP_ORIGINAL_SECTIONS`: –£–¥–∞–ª—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ `<h3>` –∏–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å (true/false). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`.
    *   `STRIP_H3_TITLES`: –°–ø–∏—Å–æ–∫ –Ω–∞–∑–≤–∞–Ω–∏–π `<h3>` (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é), –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å, –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω `STRIP_ORIGINAL_SECTIONS`.
    *   `DIGEST_NAME`: –ò–º—è —Ç–µ–º–∞—Ç–∏–∫–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç–∞—Ç—å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `AI`, `HR`, `Ozon`, `Wildberries`). –ò—Ç–æ–≥–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±—É–¥–µ—Ç: `–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π {DIGEST_NAME} –¥–∞–π–¥–∂–µ—Å—Ç`.

### 5. –ü–µ—Ä–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telethon (—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Telethon –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–∞—Å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è. –≠—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

*   –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, —É–∫–∞–∑–∞–≤ –Ω—É–∂–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:
    ```bash
    # –¥–ª—è AI-–±–æ—Ç–∞
    python main.py --config .env.ai --init-session
    ```
*   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∫–æ–¥ –∏–∑ Telegram. –ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ai.session` –¥–ª—è `.env.ai`).

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª—é–±–æ–≥–æ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤, —É–∫–∞–∑–∞–≤ –µ–≥–æ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å AI-–±–æ—Ç–∞
python main.py --config .env.ai
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Production)

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `systemd`.

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–ª—É–∂–±—ã Systemd

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–ª—É–∂–±—ã –¥–ª—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, `/etc/systemd/system/ai_news_digest_ai.service`.

```ini
[Unit]
Description=AI News Digest Bot (AI config)
After=network.target

[Service]
User=root
WorkingDirectory=/root/ai_news_digest # –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
ExecStart=/root/ai_news_digest/venv/bin/python -u main.py --config .env.ai
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
*   –ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.
*   –§–ª–∞–≥ `-u` —É `python` (`python -u main.py`) **–∫—Ä–∞–π–Ω–µ –≤–∞–∂–µ–Ω**. –û–Ω –æ—Ç–∫–ª—é—á–∞–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—é –≤—ã–≤–æ–¥–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤—Å–µ –ª–æ–≥–∏ –∏–∑ `print()` –±—É–¥—É—Ç —Å—Ä–∞–∑—É –ø–æ–ø–∞–¥–∞—Ç—å –≤ `journalctl`.

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–æ–π Systemd

*   **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (–ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.service` —Ñ–∞–π–ª–∞):
    ```bash
    sudo systemctl daemon-reload
    ```
*   **–í–∫–ª—é—á–µ–Ω–∏–µ —Å–ª—É–∂–±—ã** (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É):
    ```bash
    sudo systemctl enable ai_news_digest_ai.service
    ```
*   **–ó–∞–ø—É—Å–∫/–û—Å—Ç–∞–Ω–æ–≤–∫–∞/–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
    ```bash
    sudo systemctl start ai_news_digest_ai.service
    sudo systemctl stop ai_news_digest_ai.service
    sudo systemctl restart ai_news_digest_ai.service
    ```
*   **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª–æ–≥–æ–≤:**
    ```bash
    sudo systemctl status ai_news_digest_ai.service
    sudo journalctl -u ai_news_digest_ai.service -f # –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    ```

### 3. –°–±—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞), –≤—ã –º–æ–∂–µ—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å —Ñ–ª–∞–≥ `is_processed` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

1.  **–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã:**
    ```bash
    sqlite3 <–∏–º—è_–±–∞–∑—ã.db> "UPDATE posts SET is_processed = 0 WHERE is_processed = 1;"
    ```
2.  **–°–±—Ä–æ—Å–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—é—é "–ø–∞—á–∫—É"** (–ø–æ—Å—Ç—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é):
    ```bash
    sqlite3 <–∏–º—è_–±–∞–∑—ã.db> "UPDATE posts SET is_processed = 0 WHERE is_processed = 1 AND date >= (SELECT MAX(date) - 604800 FROM posts WHERE is_processed = 1);"
    ```

–ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å `systemd`, —á—Ç–æ–±—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É.